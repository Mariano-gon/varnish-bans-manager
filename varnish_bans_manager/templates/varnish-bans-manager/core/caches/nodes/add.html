{% extends "varnish-bans-manager/core/caches/layout.html" %}
{% load i18n %}
{% load url from future %}
{% load vbm_form_helpers %}
{% load vbm_widget_helpers %}

{% block title %}{% trans 'Caches' %} > {% trans 'Add node' %}{% endblock %}

{% block sidebar_section %}nodes-add{% endblock %}

{% block sidebar_content %}
  <div class="page-header">
    <h1>
      {% trans 'Add cache node' %}
      <small>{% trans 'Set up your caching nodes' %}</small>
    </h1>
  </div>

  <div id="breadcrumb">
    <i class="font-awesome font-awesome-home"></i>
    <span class="item">{% trans 'Caches' %}</span>
    <a href="{% url 'caches-nodes-add' %}" class="navigation current">{% trans 'Add node' %}</a>
  </div>

  <div class="row-fluid">
    <form class="ajax offset1 span10" data-url="{% url 'caches-nodes-add' %}">
      <fieldset>
        <legend>{% trans 'Node configuration' %}</legend>
        {% form_errors form %}
        <div class="row-fluid">
          {% form_cgroup form.name 'span8' %}
            <label class="control-label">{{ form.name.field.label }}</label>
            <div class="controls">
              {{ form.name|add_class:"span12" }}
              <span class="help-block">{{ form.name.field.help_text }}</span>
            </div>
            {% form_ferrors form.name 'block' %}
          {% endform_cgroup %}

          {% form_cgroup form.group 'span4' %}
            <label class="control-label">{{ form.group.field.label }}</label>
            <div class="controls">
              {{ form.group|add_class:"span12" }}
              <span class="help-block">{{ form.group.field.help_text }}</span>
            </div>
            {% form_ferrors form.group 'block' %}
          {% endform_cgroup %}
        </div>
        <div class="row-fluid">
          {% form_cgroup form.host form.port 'span8' %}
            <label class="control-label">{% trans 'Address' %}</label>
            <div class="controls">
              <div class="span8">
                <div class="input-prepend">
                  <span class="add-on"><i class="font-awesome font-awesome-globe"></i></span>
                  {{ form.host|add_class:"span12" }}
                </div>
                <span class="help-block">{{ form.host.field.help_text }}</span>
                {% form_ferrors form.host 'block' %}
              </div>
              <div class="span4">
                <div class="input-prepend">
                  <span class="add-on">:</span>
                  {{ form.port|add_class:"span12" }}
                </div>
                <span class="help-block">{{ form.port.field.help_text }}</span>
                {% form_ferrors form.port 'block' %}
              </div>
            </div>
          {% endform_cgroup %}

          {% form_cgroup form.version 'span4' %}
            <label class="control-label">{{ form.version.field.label }}</label>
            <div class="controls">
              {{ form.version|add_class:"span12" }}
              <span class="help-block">{{ form.version.field.help_text }}</span>
            </div>
            {% form_ferrors form.version 'block' %}
          {% endform_cgroup %}
        </div>
        <div class="row-fluid">
          {% form_cgroup form.secret 'span12' %}
            <label class="control-label">{{ form.secret.field.label }}</label>
            <div class="controls">
              {{ form.secret|add_class:"span12" }}
              <span class="help-block">{{ form.secret.field.help_text }}</span>
              {% form_ferrors form.secret 'block' %}
            </div>
          {% endform_cgroup %}
        </div>
      </fieldset>

      <div class="form-actions pull-right">
        <button class="btn btn-primary" type="submit"><i class="icon-ok icon-white"></i> {% trans 'Save' %}</button>
      </div>
    </form>
  </div>
{% endblock %}